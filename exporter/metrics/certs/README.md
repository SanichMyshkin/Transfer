Скрипт `sync_cert.py` предназначен для автоматической синхронизации SSL-сертификатов удаленных репозиториев с truststore Nexus. Он проверяет и добавляет недостающие сертификаты для proxy-репозиториев, обеспечивая безопасное соединение.

## Основные функции
Получение сертификатов удаленных репозиториев
Извлекает hostname и port из URL удаленного репозитория

Запрашивает сертификаты через Nexus API двумя способами:

* host/port

* Fallback по base URL (если первый способ не сработал)

---

Сопоставление сертификатов с репозиториями
Функция match_level() определяет уровень соответствия между Common Name сертификата и URL репозитория:

* Уровень 1: полное совпадение базового домена

* Уровень 2: совпадение короткого имени домена

* Уровень 0: нет совпадений

---

Добавление сертификатов в truststore
Пробует два формата добавления:

* JSON с ключом certificate

* Raw PEM-формат (fallback)

Логирует успешные операции и ошибки

---
Удаление дубликатов сертификатов
Опциональная очистка truststore от дубликатов

Удаление по fingerprint сертификатовv

Контролируется параметром cleanup_duplicates


## Процесс работы

* Получение данных: загружает текущий truststore и список репозиториев

* Фильтрация: выбирает только proxy-репозитории с remoteUrl

* Проверка сертификатов: для каждого репозитория:

* Проверяет существующие сертификаты в truststore

* Запрашивает свежие сертификаты с удаленного сервера

* Добавляет отсутствующие сертификаты

* Логирование: выводит информацию об уровне соответствия сертификатов